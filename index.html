<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä½ çš„â€œå¸é‡‘ä½“è´¨â€æ·±åº¦æ£€æµ‹æŠ¥å‘Š</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #6200ea; /* æ·±ç´«è‰²ä¸»è°ƒï¼Œæ˜¾è´µæ°” */
            --primary-light: #b388ff;
            --bg: #f3f4f6;
            --card: #ffffff;
            --text-main: #1f2937;
            --text-sub: #4b5563;
            --success: #059669; /* ç»¿è‰²-ä¼˜åŠ¿ */
            --warning: #d97706; /* æ©™è‰²-å¸¸æ€ */
            --danger: #dc2626;  /* çº¢è‰²-çŸ­æ¿ */
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            color: var(--text-main);
        }

        .container {
            width: 100%;
            max-width: 480px; /* æ‰‹æœºç«¯æœ€ä½³å®½åº¦ */
            background: var(--card);
            border-radius: 24px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
            overflow: hidden;
            padding: 25px;
            position: relative;
        }

        /* --- ç­”é¢˜é¡µæ ·å¼ --- */
        .header {
            text-align: center;
            margin-bottom: 25px;
        }
        .header h1 {
            font-size: 22px;
            color: var(--primary);
            margin: 0 0 8px 0;
        }
        .header p {
            font-size: 13px;
            color: var(--text-sub);
            margin: 0;
        }

        .progress-box {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
        }
        .progress-bar {
            flex: 1;
            height: 6px;
            background-color: #eee;
            border-radius: 10px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background-color: var(--primary);
            width: 0%;
            transition: width 0.3s ease;
        }
        .progress-num {
            font-size: 12px;
            color: var(--text-sub);
            font-weight: bold;
        }

        .question-card {
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 18px;
            font-weight: 600;
            line-height: 1.5;
            margin-bottom: 30px;
            animation: fadeIn 0.4s ease;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .option-btn {
            background: #fff;
            border: 1.5px solid #e5e7eb;
            padding: 16px;
            border-radius: 16px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-main);
            font-weight: 500;
            text-align: left; /* é€‰é¡¹å·¦å¯¹é½çœ‹èµ·æ¥æ›´æ­£å¼ */
            padding-left: 20px;
        }
        .option-btn:hover, .option-btn:active {
            border-color: var(--primary);
            background-color: #f5f3ff;
            color: var(--primary);
            transform: translateY(-1px);
        }

        /* --- ç»“æœé¡µæ ·å¼ --- */
        #result-page {
            display: none;
            animation: slideUp 0.6s ease;
        }

        .result-badge {
            text-align: center;
            margin-bottom: 10px;
        }
        .badge-text {
            background: var(--primary);
            color: white;
            padding: 6px 16px;
            border-radius: 50px;
            font-size: 12px;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        .result-title-box {
            text-align: center;
            margin-bottom: 20px;
        }
        .result-archetype {
            font-size: 32px;
            font-weight: 800;
            color: var(--primary);
            margin: 10px 0;
            text-shadow: 0 2px 10px rgba(98, 0, 234, 0.15);
        }
        .result-score {
            font-size: 14px;
            color: var(--text-sub);
        }

        /* é›·è¾¾å›¾å®¹å™¨ */
        .chart-wrapper {
            position: relative;
            height: 280px;
            width: 100%;
            margin-bottom: 30px;
        }

        /* æ·±åº¦åˆ†æå¡ç‰‡ */
        .analysis-section {
            border-top: 1px solid #eee;
            padding-top: 25px;
        }
        .section-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        .section-title::before {
            content: '';
            display: block;
            width: 4px;
            height: 18px;
            background: var(--primary);
            margin-right: 10px;
            border-radius: 2px;
        }

        .dimension-card {
            background: #f9fafb;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }
        .dim-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        .dim-name {
            font-weight: 700;
            font-size: 15px;
        }
        .dim-tag {
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 4px;
            color: white;
            font-weight: bold;
        }
        .dim-text {
            font-size: 14px;
            line-height: 1.6;
            color: #555;
            text-align: justify;
        }

        /* åº•éƒ¨å¼±ç‚¹è­¦ç¤º */
        .weakness-box {
            background: #fef2f2;
            border: 1px solid #fee2e2;
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
        }
        .weakness-title {
            color: var(--danger);
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-restart {
            width: 100%;
            padding: 16px;
            background: var(--text-main);
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 30px;
            transition: opacity 0.2s;
        }
        .btn-restart:hover {
            opacity: 0.9;
        }

        /* åŠ¨ç”»å®šä¹‰ */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

<div class="container">
    <div id="quiz-page">
        <div class="header">
            <h1>ğŸ’° å¸é‡‘ä½“è´¨æ·±åº¦æ£€æµ‹</h1>
            <p>åŸºäºè¡Œä¸ºé‡‘èå­¦ä¸æ½œæ„è¯†è´¢å¯Œè“å›¾</p>
        </div>
        
        <div class="progress-box">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-num" id="progress-num">1/24</div>
        </div>

        <div class="question-card" id="question-text">
            é¢˜ç›®åŠ è½½ä¸­...
        </div>

        <div class="options">
            <button class="option-btn" onclick="submitAnswer(5)">å®Œå…¨ç¬¦åˆ</button>
            <button class="option-btn" onclick="submitAnswer(4)">æ¯”è¾ƒç¬¦åˆ</button>
            <button class="option-btn" onclick="submitAnswer(3)">ä¸€èˆ¬/ä¸ç¡®å®š</button>
            <button class="option-btn" onclick="submitAnswer(2)">ä¸å¤ªç¬¦åˆ</button>
            <button class="option-btn" onclick="submitAnswer(1)">å®Œå…¨ä¸ç¬¦åˆ</button>
        </div>
    </div>

    <div id="result-page">
        <div class="result-badge">
            <span class="badge-text">ä½ çš„è´¢å¯ŒåŸºå› åŸå‹</span>
        </div>
        
        <div class="result-title-box">
            <div class="result-archetype" id="final-title">è®¡ç®—ä¸­...</div>
            <div class="result-score">æ€»å¾—åˆ†ï¼š<strong id="total-score" style="color:var(--primary); font-size:18px;">0</strong> / 120</div>
        </div>

        <div class="chart-wrapper">
            <canvas id="radarChart"></canvas>
        </div>

        <div class="analysis-section">
            <div class="section-title">ğŸ§¬ è´¢å¯ŒåŸºå› æ·±åº¦æ‰«æ</div>
            <div id="detailed-analysis-box">
                </div>
        </div>

        <div class="weakness-box">
            <div class="weakness-title">
                âš ï¸ è´¢å¯Œç“¶é¢ˆè¯Šæ–­
            </div>
            <div class="dim-text" id="weakness-text">
                </div>
        </div>

        <button class="btn-restart" onclick="location.reload()">ä¿å­˜ç»“æœ / é‡æ–°æµ‹è¯•</button>
    </div>
</div>

<script>
    // ================= é…ç½®åŒºåŸŸ =================

    // 1. é¢˜åº“é…ç½® (24é¢˜ï¼Œæ¯ç»„6é¢˜ï¼Œæ‰“ä¹±é¡ºåºæ˜¾ç¤º)
    // ç»´åº¦: sense(å—…è§‰), risk(åšå¼ˆ), action(æ‰§è¡Œ), container(å®¹ç§¯)
    // reverse: true ä»£è¡¨åå‘è®¡åˆ†(é€‰5å¾—1åˆ†)
    const rawQuestions = [
        // --- è´¢å¯Œå—…è§‰ Sense ---
        { id: 1, dim: "sense", text: "çœ‹åˆ°ä¸€å®¶çˆ†ç«çš„ç½‘çº¢åº—ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”æ˜¯åˆ†æå®ƒçš„ç›ˆåˆ©æ¨¡å¼ï¼Œè€Œä¸æ˜¯åªæƒ³è¿›å»æ¶ˆè´¹ã€‚", rev: false },
        { id: 2, dim: "sense", text: "æˆ‘å¯¹æ•°å­—å¾ˆä¸æ•æ„Ÿï¼Œçœ‹åˆ°å¤æ‚çš„æ”¶ç›Šç‡è®¡ç®—å°±å¤´ç–¼ã€‚", rev: true },
        { id: 3, dim: "sense", text: "åœ¨åˆ·è§†é¢‘æˆ–çœ‹æ–°é—»æ—¶ï¼Œæˆ‘ç»å¸¸èƒ½æ•é”åœ°å‘ç°æŸç§å°šæœªè¢«æ»¡è¶³çš„å¸‚åœºéœ€æ±‚ã€‚", rev: false },
        { id: 4, dim: "sense", text: "æˆ‘è®¤ä¸ºèµšé’±ä¸»è¦é å‹¤å¥‹å·¥ä½œï¼Œæ‰€è°“çš„â€œé£å£â€å’Œâ€œè¶‹åŠ¿â€å¤§å¤šæ˜¯éª—äººçš„ã€‚", rev: true },
        { id: 5, dim: "sense", text: "èº«è¾¹çš„æœ‹å‹å¦‚æœæƒ³åšå‰¯ä¸šæˆ–æŠ•èµ„ï¼Œç»å¸¸ä¼šæ¥å¾æ±‚æˆ‘çš„æ„è§ã€‚", rev: false },
        { id: 6, dim: "sense", text: "æˆ‘ä¹Ÿæƒ³èµšé’±ï¼Œä½†æˆ‘æ€»æ˜¯æä¸æ¸…æ¥šç°åœ¨åˆ°åº•ä»€ä¹ˆè¡Œä¸šèƒ½èµšé’±ã€‚", rev: true },

        // --- é£é™©åšå¼ˆ Risk ---
        { id: 7, dim: "risk", text: "å¦‚æœæœ‰ä¸€ç¬”é—²é’±ï¼Œæˆ‘å®æ„¿å­˜å®šæœŸï¼Œä¹Ÿä¸æ„¿å°è¯•æœ‰æœ¬é‡‘äºæŸé£é™©çš„æŠ•èµ„ã€‚", rev: true },
        { id: 8, dim: "risk", text: "ä¸ºäº†è·å¾—æŒ‡æ•°çº§çš„å›æŠ¥ï¼Œæˆ‘æ„¿æ„å¿å—é•¿è¾¾ä¸€ä¸¤å¹´çš„â€œé¢—ç²’æ— æ”¶â€æœŸã€‚", rev: false },
        { id: 9, dim: "risk", text: "åšé‡å¤§é‡‘é’±å†³ç­–æ—¶ï¼ˆå¦‚ä¹°æˆ¿ã€æ¢èµ›é“ï¼‰ï¼Œæˆ‘é€šå¸¸æ„Ÿåˆ°å…´å¥‹å¤šäºææƒ§ã€‚", rev: false },
        { id: 10, dim: "risk", text: "æˆ‘éå¸¸è®¨åŒä¸ç¡®å®šæ€§ï¼Œç¨³å®šçš„å·¥èµ„æ”¶å…¥è®©æˆ‘æœ€æœ‰å®‰å…¨æ„Ÿã€‚", rev: true },
        { id: 11, dim: "risk", text: "æˆ‘è®¤ä¸ºâ€œå¯Œè´µé™©ä¸­æ±‚â€æ˜¯è‡³ç†åè¨€ï¼Œä¸æ•¢ä¸‹æ³¨çš„äººæ°¸è¿œæ²¡æœºä¼šã€‚", rev: false },
        { id: 12, dim: "risk", text: "ä¸€æ—¦æŠ•èµ„å‡ºç°äºæŸï¼Œæˆ‘ä¼šæ•´æ™šç¡ä¸ç€è§‰ï¼Œæ€¥äºæŠŠå‰©ä¸‹çš„é’±æ’¤å‡ºæ¥ã€‚", rev: true },

        // --- å˜ç°æ‰§è¡Œ Action ---
        { id: 13, dim: "action", text: "æˆ‘ç»å¸¸æœ‰å¾ˆå¥½çš„æé’±ç‚¹å­ï¼Œä½†æœ€åå¤§å¤šéƒ½åœç•™åœ¨è„‘æµ·é‡Œï¼Œæ²¡æœ‰å®é™…åšå‡ºæ¥ã€‚", rev: true },
        { id: 14, dim: "action", text: "å¦‚æœå†³å®šè¦åšä¸€ä»¶å‰¯ä¸šï¼Œæˆ‘ä¼šåœ¨24å°æ—¶å†…è¿ˆå‡ºç¬¬ä¸€æ­¥ï¼ˆå¦‚æ³¨å†Œè´¦å·ã€è”ç³»äººï¼‰ã€‚", rev: false },
        { id: 15, dim: "action", text: "é‡åˆ°ä¸æ‡‚çš„èµšé’±æŠ€èƒ½ï¼Œæˆ‘ä¼šç«‹åˆ»å»æœæ•™ç¨‹å­¦ä¹ ï¼Œè€Œä¸æ˜¯ç­‰ç€ã€‚", rev: false },
        { id: 16, dim: "action", text: "æˆ‘æ€»è§‰å¾—å¿…é¡»è¦æŠŠæ‰€æœ‰ç»†èŠ‚éƒ½å‡†å¤‡å®Œç¾äº†ï¼Œæ‰èƒ½å¼€å§‹å®æ–½æˆ‘çš„èµšé’±è®¡åˆ’ã€‚", rev: true },
        { id: 17, dim: "action", text: "é¢å¯¹å›°éš¾ï¼Œæˆ‘çš„å£å¤´ç¦…é€šå¸¸æ˜¯â€œè¿™äº‹å„¿æ€ä¹ˆåŠâ€ï¼Œè€Œä¸æ˜¯â€œè¿™äº‹å„¿å¤ªéš¾äº†â€ã€‚", rev: false },
        { id: 18, dim: "action", text: "æˆ‘ä¹°äº†å¾ˆå¤šä»˜è´¹è¯¾ç¨‹/ä¹¦ç±ï¼Œä½†çœŸæ­£çœ‹å®Œå¹¶ç…§åšçš„ä¸åˆ° 20%ã€‚", rev: true },

        // --- è´¢å¯Œå®¹ç§¯ Container ---
        { id: 19, dim: "container", text: "æˆ‘å†…å¿ƒæ·±å¤„éšçº¦è§‰å¾—ï¼Œæœ‰é’±äººå¤§å¤šæ˜¯è´ªå©ªçš„ã€æˆ–è€…ä¸é“å¾·çš„ã€‚", rev: true },
        { id: 20, dim: "container", text: "å¦‚æœçªç„¶ä¸­äº†ä¸€åƒä¸‡å½©ç¥¨ï¼Œæˆ‘éå¸¸æœ‰ä¿¡å¿ƒèƒ½æŒæ§è¿™ç¬”å·¨æ¬¾ï¼Œè€Œä¸æ˜¯å‡ å¹´åæŒ¥éœä¸€ç©ºã€‚", rev: false },
        { id: 21, dim: "container", text: "æ¯å½“æˆ‘æƒ³èŠ±é’±çŠ’åŠ³è‡ªå·±å¥½çš„ä¸œè¥¿æ—¶ï¼Œå†…å¿ƒæ€»ä¼šæœ‰ä¸€ç§â€œæˆ‘ä¸é…â€çš„è´Ÿç½ªæ„Ÿã€‚", rev: true },
        { id: 22, dim: "container", text: "æˆ‘éå¸¸æ¸…æ¥šè‡ªå·±æ¯æœˆçš„ç°é‡‘æµçŠ¶å†µï¼Œèƒ½ç²¾ç¡®è¯´å‡ºæ¯ä¸ªæœˆçš„ç»“ä½™æ˜¯å¤šå°‘ã€‚", rev: false },
        { id: 23, dim: "container", text: "å½“åˆ«äººå¤¸æˆ‘æœ‰é’±æˆ–æœ‰èƒ½åŠ›æ—¶ï¼Œæˆ‘ä¼šå¤§æ–¹æ¥å—èµç¾ï¼Œè€Œä¸æ˜¯å°´å°¬åœ°å¦è®¤ã€‚", rev: false },
        { id: 24, dim: "container", text: "æˆ‘è§‰å¾—é’±å¤ŸèŠ±å°±è¡Œï¼Œå¤ªå¤šçš„è´¢å¯Œåè€Œæ˜¯ä¸€ç§è´Ÿæ‹…å’Œéº»çƒ¦ã€‚", rev: true }
    ];

    // 2. æ·±åº¦è¯Šæ–­æ–‡æ¡ˆåº“ (Cold Reading)
    const analysisDB = {
        sense: {
            name: "å•†ä¸šå—…è§‰",
            high: "ã€æ•é”ã€‘ä½ æ‹¥æœ‰çŒäººèˆ¬çš„ç›´è§‰ã€‚åœ¨å¤§å¤šæ•°äººè¿˜åœ¨æŠ±æ€¨ç¯å¢ƒä¸å¥½æ—¶ï¼Œä½ å¾€å¾€èƒ½ç¬¬ä¸€çœ¼çœ‹åˆ°å…¶ä¸­çš„å¥—åˆ©ç©ºé—´ã€‚ä½ æ“…é•¿æŠŠä¿¡æ¯å·®è½¬åŒ–ä¸ºç°é‡‘æµï¼Œä½ çš„å¤§è„‘å°±æ˜¯ä¸€å°è‡ªåŠ¨è¿è½¬çš„å•†ä¸šé›·è¾¾ã€‚",
            mid: "ã€å¹³ç¨³ã€‘ä½ å…·å¤‡åŸºæœ¬çš„å•†ä¸šå¸¸è¯†ï¼Œèƒ½çœ‹æ‡‚å¤§éƒ¨åˆ†çš„èµšé’±é€»è¾‘ã€‚ä½†ä½ å®¹æ˜“è¢«æµ·é‡ä¿¡æ¯å¹²æ‰°ï¼Œå¶å°”ä¼šå› ä¸ºçŠ¹è±«è€Œé”™è¿‡æœ€ä½³åˆ‡å…¥ç‚¹ï¼Œéœ€è¦åˆ»æ„ç»ƒä¹ å¯¹â€œå…³é”®ä¿¡å·â€çš„æ•æ‰èƒ½åŠ›ã€‚",
            low: "ã€è¿Ÿé’ã€‘ä½ å¯èƒ½è¿‡åº¦å…³æ³¨â€œå‹¤å¥‹â€è€Œå¿½ç•¥äº†â€œé€‰æ‹©â€ã€‚ä½ å®¹æ˜“é™·å…¥ä½å¤´æ‹‰è½¦çš„çŠ¶æ€ï¼Œå¯¹å¸‚åœºå˜åŒ–ä¸å¤Ÿæ•æ„Ÿã€‚è­¦æƒ•ï¼šä¸è¦ç”¨æˆ˜æœ¯ä¸Šçš„å‹¤å¥‹æ©ç›–æˆ˜ç•¥ä¸Šçš„æ‡’æƒ°ã€‚"
        },
        risk: {
            name: "é£é™©åšå¼ˆ",
            high: "ã€æ¿€è¿›ã€‘ä½ æ˜¯å¤©ç”Ÿçš„ç ´å±€è€…ã€‚å¯¹äºä¸ç¡®å®šæ€§ï¼Œä½ æ„Ÿåˆ°çš„å…´å¥‹å¤šäºææƒ§ã€‚è¿™ç§ç‰¹è´¨è®©ä½ ææ˜“åœ¨åŠ¨è¡ç¯å¢ƒä¸­æŠ“ä½æš´å¯Œæœºä¼šï¼Œä½†ä¹Ÿè¦è­¦æƒ•å› ç›²ç›®è‡ªä¿¡è€Œå¯¼è‡´çš„â€œå½’é›¶â€é£é™©ã€‚",
            mid: "ã€å¹³è¡¡ã€‘ä½ æ‡‚å¾—æƒè¡¡åˆ©å¼Šã€‚ä½ æ„¿æ„ä¸ºäº†å¯é¢„æœŸçš„æ”¶ç›Šæ‰¿æ‹…é€‚åº¦é£é™©ï¼Œä½†ç»ä¸ä¼šå­¤æ³¨ä¸€æ·ã€‚è¿™æ˜¯æœ€åˆ©äºé•¿è·‘çš„å¿ƒæ€ï¼Œè™½ç„¶çˆ†å‘åŠ›ä¸å¦‚æ¿€è¿›æ´¾ï¼Œä½†èƒœåœ¨æ´»å¾—ä¹…ã€‚",
            low: "ã€ä¿å®ˆã€‘ä½ çš„å®‰å…¨æ„Ÿé˜ˆå€¼å¾ˆé«˜ï¼Œç¨å¾®ä¸€ç‚¹äºæŸçš„å¯èƒ½éƒ½ä¼šè®©ä½ ç„¦è™‘ã€‚è¿™ä¿æŠ¤äº†ä½ çš„æœ¬é‡‘ï¼Œä½†ä¹Ÿå°é”äº†ä½ è·¨è¶Šé˜¶å±‚çš„å¯èƒ½ã€‚ä½ çš„è´¢å¯Œå¢é•¿ä¸»è¦é â€œæ”’â€ï¼Œè€Œéâ€œèµšâ€ã€‚"
        },
        action: {
            name: "å˜ç°æ‰§è¡Œ",
            high: "ã€å¼ºæ‚ã€‘ä½ çš„è¡ŒåŠ¨åŠ›å‡»è´¥äº† 99% çš„äººã€‚å½“ä½ å†³å®šåšä¸€ä»¶äº‹æ—¶ï¼Œä½ é€šå¸¸å·²ç»è·‘å‡ºäº†ç¬¬ä¸€æ­¥ã€‚ä½ æ˜¯â€œå…ˆå¼€æªåç„å‡†â€çš„ä¿¡å¥‰è€…ï¼Œè¿™ç§ç‰¹è´¨è®©ä½ èƒ½è¿…é€Ÿé€šè¿‡è¯•é”™æ‹¿åˆ°ç»“æœã€‚",
            mid: "ã€çº ç»“ã€‘ä½ æœ‰æƒ³æ³•ï¼Œä½†å¾€å¾€æ­¢æ­¥äºâ€œå‡†å¤‡é˜¶æ®µâ€ã€‚ä½ æ€»æƒ³æŠŠä¸€åˆ‡éƒ½è§„åˆ’å®Œç¾å†å‡ºå‘ï¼Œå¯¼è‡´å¾ˆå¤šå¥½ç‚¹å­æœ€åä¸äº†äº†ä¹‹ã€‚è®°ä½ï¼šå®Œæˆæ¯”å®Œç¾æ›´é‡è¦ã€‚",
            low: "ã€æ‹–å»¶ã€‘ä½ æ˜¯å…¸å‹çš„â€œæ€æƒ³å·¨äººï¼Œè¡ŒåŠ¨çŸ®å­â€ã€‚ä½ å¯èƒ½ä¹°äº†å¾ˆå¤šè¯¾ã€çœ‹äº†å¾ˆå¤šä¹¦ï¼Œä½†çœŸæ­£è½å®åˆ°å˜ç°åŠ¨ä½œä¸Šçš„æå°‘ã€‚ä½ çš„çŸ¥è¯†å‚¨å¤‡è¶³å¤Ÿäº†ï¼Œç¼ºçš„æ˜¯é‚£ä¸€è„šæ²¹é—¨ã€‚"
        },
        container: {
            name: "è´¢å¯Œå®¹ç§¯",
            high: "ã€å¼€é˜”ã€‘ä½ æ‹¥æœ‰æä½³çš„â€œé…å¾—æ„Ÿâ€ã€‚ä½ æ½œæ„è¯†é‡Œåšä¿¡è‡ªå·±å€¼å¾—æ‹¥æœ‰å·¨å¤§çš„è´¢å¯Œï¼Œè¿™è®©ä½ åœ¨é¢å¯¹å¤§é¢é‡‘é’±æ—¶å¿ƒæ€ç¨³å¥ï¼Œé’±åœ¨ä½ æ‰‹é‡Œèƒ½ç•™å¾—ä½ã€ç”Ÿå¾—å‡ºæ–°é’±ã€‚",
            mid: "ã€æ³¢åŠ¨ã€‘ä½ æ¸´æœ›è´¢å¯Œï¼Œä½†æ½œæ„è¯†é‡Œä¼¼ä¹å¯¹æœ‰é’±äººæœ‰ä¸€ä¸åè§ï¼ˆè§‰å¾—ä»–ä»¬è´ªå©ªæˆ–ç´¯ï¼‰ã€‚è¿™ç§çŸ›ç›¾å¿ƒç†ä¼šè®©ä½ åœ¨èµšåˆ°é’±åï¼Œä¸çŸ¥ä¸è§‰é€šè¿‡æ¶ˆè´¹æˆ–ä¹±æŠ•èµ„æŠŠé’±â€œæ¼â€å‡ºå»ã€‚",
            low: "ã€æ¼æ–—ã€‘ä½ çš„æ½œæ„è¯†ä¼¼ä¹åœ¨æ’æ–¥è´¢å¯Œã€‚ä¹Ÿè®¸æ˜¯å› ä¸ºåŸç”Ÿå®¶åº­çš„å½±å“ï¼Œä½ å¯¹é‡‘é’±æœ‰æ·±æ·±çš„ä¸å®‰å…¨æ„Ÿæˆ–ç½ªæ¶æ„Ÿã€‚å¦‚æœä¸ä¿®å¤è¿™ä¸ªâ€œå®¹å™¨â€ï¼Œèµšå†å¤šçš„é’±æœ€åéƒ½ä¼šæµèµ°ã€‚"
        }
    };

    // 3. æ€»è¯„ç§°å· (åŸºäºæœ€é«˜åˆ†ç»´åº¦)
    const archetypes = {
        sense: "ğŸ¦… æ·±æµ·å·¨é²¨ (The Shark)",
        risk: "ğŸ¦ è’é‡èµŒå¾’ (The Gambler)",
        action: "âš¡ é—ªç”µæ‰§è¡Œè€… (The Doer)",
        container: "ğŸ° è´¢å¯Œå®ˆé—¨äºº (The Keeper)"
    };

    // ================= é€»è¾‘æ§åˆ¶ =================

    let questions = [];
    let currentIdx = 0;
    let scores = { sense: 0, risk: 0, action: 0, container: 0 };
    
    // æ´—ç‰Œç®—æ³•
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function init() {
        questions = shuffleArray([...rawQuestions]);
        renderQuestion();
    }

    function renderQuestion() {
        // æ›´æ–°è¿›åº¦
        document.getElementById('progress-num').innerText = `${currentIdx + 1} / ${questions.length}`;
        const pct = ((currentIdx) / questions.length) * 100;
        document.getElementById('progress-fill').style.width = `${pct}%`;

        // æ›´æ–°é¢˜ç›®æ–‡æœ¬ (æ·»åŠ æ·¡å…¥æ•ˆæœ)
        const qText = document.getElementById('question-text');
        qText.style.opacity = 0;
        setTimeout(() => {
            qText.innerText = questions[currentIdx].text;
            qText.style.opacity = 1;
        }, 150);
    }

    function submitAnswer(val) {
        const q = questions[currentIdx];
        let score = val;
        // å¤„ç†åå‘è®¡åˆ†
        if (q.rev) {
            score = 6 - val;
        }
        scores[q.dim] += score;

        currentIdx++;
        if (currentIdx < questions.length) {
            renderQuestion();
        } else {
            generateReport();
        }
    }

    function generateReport() {
        // åˆ‡æ¢é¡µé¢
        document.getElementById('quiz-page').style.display = 'none';
        document.getElementById('result-page').style.display = 'block';

        // 1. å¯»æ‰¾æœ€é«˜åˆ†å’Œæœ€ä½åˆ†
        let maxScore = -1;
        let maxDim = 'sense';
        let minScore = 100;
        let minDim = 'sense';
        let totalScore = 0;

        const dimKeys = ['sense', 'risk', 'action', 'container'];
        dimKeys.forEach(key => {
            const s = scores[key];
            totalScore += s;
            if (s > maxScore) { maxScore = s; maxDim = key; }
            if (s < minScore) { minScore = s; minDim = key; }
        });

        // 2. å¡«å……åŸºç¡€ä¿¡æ¯
        document.getElementById('total-score').innerText = totalScore;
        document.getElementById('final-title').innerText = archetypes[maxDim];

        // 3. ç”Ÿæˆæ·±åº¦åˆ†æå¡ç‰‡
        const analysisBox = document.getElementById('detailed-analysis-box');
        analysisBox.innerHTML = ""; // æ¸…ç©º

        dimKeys.forEach(dim => {
            const s = scores[dim];
            const meta = analysisDB[dim];
            
            let status = "";
            let colorVar = "";
            let text = "";

            // åˆ¤åˆ†é€»è¾‘ï¼šæ»¡åˆ†30
            // >= 24 (80%) -> ä¼˜åŠ¿
            // <= 15 (50%) -> çŸ­æ¿
            if (s >= 24) {
                status = "æ ¸å¿ƒä¼˜åŠ¿";
                colorVar = "var(--success)";
                text = meta.high;
            } else if (s <= 15) {
                status = "æ½œåœ¨çŸ­æ¿";
                colorVar = "var(--danger)";
                text = meta.low;
            } else {
                status = "è¡¨ç°å¹³ç¨³";
                colorVar = "var(--warning)";
                text = meta.mid;
            }

            // æ’å…¥HTML
            analysisBox.innerHTML += `
                <div class="dimension-card">
                    <div class="dim-header">
                        <span class="dim-name">${meta.name}</span>
                        <span class="dim-tag" style="background:${colorVar}">${status}</span>
                    </div>
                    <div class="dim-text">${text}</div>
                </div>
            `;
        });

        // 4. å¡«å……å¼±ç‚¹å»ºè®®
        const weakName = analysisDB[minDim].name;
        document.getElementById('weakness-text').innerHTML = `
            ç»è¿‡å…¨ç»´åº¦æ‰«æï¼Œç³»ç»Ÿæ£€æµ‹åˆ° <strong>${weakName}</strong> æ˜¯åˆ¶çº¦ä½ è´¢å¯Œçˆ†å‘çš„æœ€å¤§ç“¶é¢ˆï¼ˆå¾—åˆ†ä»… ${scores[minDim]} åˆ†ï¼‰ã€‚<br><br>
            æ ¹æ®æœ¨æ¡¶æ•ˆåº”ï¼Œä½ çš„è´¢å¯Œå®¹é‡ä¸å–å†³äºä½ æœ€å¼ºçš„é•¿æ¿ï¼Œè€Œå–å†³äºè¿™å—æœ€çŸ­çš„æ¿ã€‚å»ºè®®è¿‘æœŸåœæ­¢å¯»æ‰¾æ–°é¡¹ç›®ï¼Œä¸“é—¨é’ˆå¯¹${weakName}è¿›è¡Œä¸“é¡¹æå‡ã€‚
        `;

        // 5. ç»˜åˆ¶é›·è¾¾å›¾
        drawRadarChart(scores);
    }

    function drawRadarChart(scores) {
        const ctx = document.getElementById('radarChart').getContext('2d');
        new Chart(ctx, {
            type: 'radar',
            data: {
                labels: ['å•†ä¸šå—…è§‰', 'é£é™©åšå¼ˆ', 'å˜ç°æ‰§è¡Œ', 'è´¢å¯Œå®¹ç§¯'],
                datasets: [{
                    label: 'èƒ½åŠ›å€¼',
                    data: [scores.sense, scores.risk, scores.action, scores.container],
                    backgroundColor: 'rgba(98, 0, 234, 0.2)',
                    borderColor: '#6200ea',
                    borderWidth: 2,
                    pointBackgroundColor: '#fff',
                    pointBorderColor: '#6200ea',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#6200ea'
                }]
            },
            options: {
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 30, // æ»¡åˆ†30
                        ticks: { display: false }, // éšè—åˆ»åº¦æ•°å­—
                        pointLabels: {
                            font: { size: 14, weight: 'bold' },
                            color: '#333'
                        },
                        grid: {
                            color: '#e5e7eb'
                        },
                        angleLines: {
                            color: '#e5e7eb'
                        }
                    }
                },
                plugins: {
                    legend: { display: false }
                },
                maintainAspectRatio: false
            }
        });
    }

    // å¯åŠ¨
    init();

</script>
</body>
</html>
